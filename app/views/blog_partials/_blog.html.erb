<div class="<%= cycle("view-lite-row", "view-lite-row-alt") %> blog-row">
  <div class="blog-entry">
    <div class="blog-title"><%= link_to blog.title, :controller => "blogs", :action => "show", :id => blog.id %></div>

    <div class="blog-date"><%= blog.created_at.to_formatted_s(:long_ordinal) %></div>

    <div style="clear:both;"></div>

    <div class="blog-body">
      <%=truncate((blog_body_content blog), 500)%>
      (<%= link_to "Read More", :controller => "blogs", :action => "show", :id => blog.id %>)
    </div>

    <div>
      <%= link_to "#{blog.blog_comments.length} comments", :controller => "blogs", :action => "show", :id => blog.id %>
    </div>

    <% if @p && @p.id == blog.profile_id %>
      <div style="float: right;">
        <%= link_to "Edit", :controller => :blogs, :action => "edit", :id => blog.id %> |
        <!--<%= link_to "Delete", :controller => :blogs, :action => "destroy", :id => blog.id %>-->
        <%= link_to "Delete", blog_path(blog), :confirm => 'Are you sure?', :method => :delete %>
      </div>
    <% end %>

    <div style="clear:both;"></div>

    <% if blog.project_id? %>
      <div>
        <%= link_to "View Blog Project >>", :controller => :projects, :action => "show", :id => blog.project_id %>
      </div>
    <% end %>
  </div>
</div>